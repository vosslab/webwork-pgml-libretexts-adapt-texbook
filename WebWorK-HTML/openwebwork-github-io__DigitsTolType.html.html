<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>DigitsTolType</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		body { max-width: 900px; margin: 2rem auto; padding: 0 1rem; }
		body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
		pre, code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; }
		pre { overflow-x: auto; padding: 0.75rem; border: 1px solid #ddd; }
		blockquote { border-left: 4px solid #ddd; padding-left: 1rem; color: #444; }
		.meta { color: #555; font-size: 0.95rem; margin: 0.75rem 0 1.25rem 0; }
		.source { color: #555; font-size: 0.95rem; margin-bottom: 0.25rem; }
	</style>
</head>
<body>
	<h1>DigitsTolType</h1>
	<div class="source">Source: <a href="https://openwebwork.github.io/pg-docs/sample-problems/problem-techniques/DigitsTolType.html">https://openwebwork.github.io/pg-docs/sample-problems/problem-techniques/DigitsTolType.html</a></div>
<body>
	<div class="container-fluid p-3">
		<div class="row">
			<div class="col">
				<h1>Number of Digits and Tolerance in Answers</h1>
				<p>This describes an alternative way for determining the tolerance type based on the number of digits.</p>
			</div>
			<div class="col text-end">
				<a href="https://openwebwork.github.io/pg-docs/sample-problems/../index.html">Return to the PG docs home</a>
</div>
		</div>
		<div class="row">
			<div class="col">
				<h2>Complete Code</h2>
				<p>
				Download file: <a href="DigitsTolType.pg">DigitsTolType.pg</a>
</p>
			</div>
		</div>
		<div class="row">
			<div class="col text-center"><h2 class="fw-bold fs-3">PG problem file</h2></div>
			<div class="col text-center"><h2 class="fw-bold fs-3">Explanation</h2></div>
		</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 order-md-first order-last p-0 position-relative overflow-x-hidden">
					<button class="clipboard-btn btn btn-sm btn-secondary position-absolute top-0 end-0 me-1 mt-1 z-1" type="button" data-code="DOCUMENT();
loadMacros('PGstandard.pl', 'PGML.pl', 'PGcourse.pl');
" aria-label="copy to clipboard">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-fill" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"></path>
						</svg>
					</button>
					<pre class="CodeMirror cm-s-eclipse m-0 h-100 p-3 border border-secondary overflow-x-scroll">DOCUMENT();
loadMacros('PGstandard.pl', 'PGML.pl', 'PGcourse.pl');
</pre>
				</div>
				<div class="explanation preamble col-sm-12 col-md-6 order-md-last order-first border border-dark">
					<p><b>Preamble</b></p>
						These standard macros need to be loaded.
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 order-md-first order-last p-0 position-relative overflow-x-hidden">
					<button class="clipboard-btn btn btn-sm btn-secondary position-absolute top-0 end-0 me-1 mt-1 z-1" type="button" data-code="Context()-&gt;flags-&gt;set(tolType =&gt; 'digits', tolerance =&gt; 3, tolTruncation =&gt; 1);
$ans = Real(&quot;pi&quot;);" aria-label="copy to clipboard">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-fill" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"></path>
						</svg>
					</button>
					<pre class="CodeMirror cm-s-eclipse m-0 h-100 p-3 border border-secondary overflow-x-scroll">Context()-&gt;flags-&gt;set(tolType =&gt; 'digits', tolerance =&gt; 3, tolTruncation =&gt; 1);
$ans = Real("pi");</pre>
				</div>
				<div class="explanation setup col-sm-12 col-md-6 order-md-last order-first border border-dark">
					<p><b>Setup</b></p>
						<ul>
<li>The <code>tolType =&gt; 'digits'</code> switches from the default <code>'relative'</code>tolerance type to the <code>'digits'</code> tolerance type.</li>
<li>The <code>tolerance =&gt; 3</code> sets the number of digits to check to 3. The default value is acutally the default for other tolerance types, <code>0.001</code>, but any tolerance that is between 0 and 1 is converted via <code>log10</code> and rounding to an integer (in this case, to 3).</li>
<li>The <code>tolTruncation</code> parameter is either 1 (true) or 0 (false). Its default is 1. Details are explained below.</li>
<li>The <code>tolExtraDigits</code> parameter sets the number of extra digits to examine beyond the first tolerance digits. Its default value is 1. This is explained below.</li>
<li>The goal is that the student must enter at least the first tolerance digits correctly. The last digits that they enter might be rounded (always accepted) or truncated (only accepted if <code>tolTruncation</code> is true). For example, if the correct answer is e=2.7182818… and tolerance is 3, the student can answer with 2.72. Or they can answer with 2.71 if <code>tolTruncation</code> is true. But for example 2.7 and 2.73 are not accepted.</li>
</ul>
<p>If the student enters additional digits, the first additional <code>tolExtraDigits</code> digits are examined in the same manner. For example, if the correct answer is <code>pi=3.1415926...</code> and default flag values are used, the student can answer with 3.14, 3.141, 3.142, 3.1415, and even 3.1418 since that 8 is beyond the extra digits checking. But for example 3.143 is not accepted, since the first extra digit is not right. (And if <code>tolTruncation</code> is false, 3.141 would not be accepted either.)</p>
<p>Warning: this tolerance type also applies to formula comparisons. For example if the answer is <code>2^x</code> and a student enters <code>e^(0.69x)</code>, this will probably not be accepted. Random test values will be used for x to make that comparison. For example if one of the test values is <code>x=2</code>, the correct output is 4 and the student’s output would be 3.9749… and this would be declared as not a match, since the first three digits to not agree.</p>
<p>Warning: this article is about using this tolerance type for comparison of correct answers to student answers. But if this tolerance type is activated for a context, it also applies to comparisons you might make in problem setup code. It may be important to understand that it is not symmetric. For example, under default conditions, <code>Real(4) == Real(3.995)</code> is false, while <code>Real(3.995) == Real(4)</code> is true. The left operand is viewed as the “correct” value. With <code>Real(4) == Real(3.995)</code>, that “5” violates the <code>tolExtraDigits</code> checking. But with <code>Real(3.995) == Real(4)</code>, it is as if the student entered 4.00 and has the first 3 digits correct accounting for rounding. (Note that the default tolerance type relative is similarly asymmetric, but the effect is more subtle. You can see it with <code>Real(4) == Real(3.996001)</code> versus <code>Real(3.996001) == Real(4)</code>.)</p>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 order-md-first order-last p-0 position-relative overflow-x-hidden">
					<button class="clipboard-btn btn btn-sm btn-secondary position-absolute top-0 end-0 me-1 mt-1 z-1" type="button" data-code="BEGIN_PGML

This section is with [|tolTruncation|] set to true (1).  The exact answer
is [`\pi`].   Enter 3.14, 3.15, 3.141, 3.142 to see if it accepts the answer.

[`\pi=`][_]{$ans}

END_PGML
" aria-label="copy to clipboard">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-fill" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"></path>
						</svg>
					</button>
					<pre class="CodeMirror cm-s-eclipse m-0 h-100 p-3 border border-secondary overflow-x-scroll">BEGIN_PGML

This section is with [|tolTruncation|] set to true (1).  The exact answer
is [`\pi`].   Enter 3.14, 3.15, 3.141, 3.142 to see if it accepts the answer.

[`\pi=`][_]{$ans}

END_PGML
</pre>
				</div>
				<div class="explanation statement col-sm-12 col-md-6 order-md-last order-first border border-dark">
					<p><b>Statement</b></p>
						This is the problem statement in PGML.
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 order-md-first order-last p-0 position-relative overflow-x-hidden">
					<button class="clipboard-btn btn btn-sm btn-secondary position-absolute top-0 end-0 me-1 mt-1 z-1" type="button" data-code="BEGIN_PGML_SOLUTION
Solution explanation goes here.
END_PGML_SOLUTION

ENDDOCUMENT();" aria-label="copy to clipboard">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-fill" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"></path>
						</svg>
					</button>
					<pre class="CodeMirror cm-s-eclipse m-0 h-100 p-3 border border-secondary overflow-x-scroll">BEGIN_PGML_SOLUTION
Solution explanation goes here.
END_PGML_SOLUTION

ENDDOCUMENT();</pre>
				</div>
				<div class="explanation solution col-sm-12 col-md-6 order-md-last order-first border border-dark">
					<p><b>Solution</b></p>
						A solution should be provided here.
				</div>
			</div>
	</div>

	<script type="module">
		for (const pre of document.body.querySelectorAll('pre.CodeMirror')) {
			CodeMirror.runMode(pre.textContent, 'PG', pre);
		}

		for (const btn of document.querySelectorAll('.clipboard-btn')) {
			btn.addEventListener('click', () => navigator.clipboard.writeText(btn.dataset.code));
		}
	</script>



</body>
</body>
</html>
