<p>
This page only covers the PG you need to support a PGML prompt.
</p>

<p>
<strong>Use this page when:</strong> you need to decide where a change belongs in the file.
</p>

<h2>Copy and edit (section map)</h2>
<p>
The block below is a complete PG file skeleton with all five sections labeled so you can see the overall structure at a glance.
</p>
<pre>
# ===== OPL HEADER =====
## TITLE('Short descriptive title')
## DESCRIPTION
## One to three sentences describing the task and constraints.
## ENDDESCRIPTION
## KEYWORDS('keyword1','keyword2','keyword3')
## DBsubject('Biochemistry')
## DBchapter('Enzymes')
## DBsection('Kinetics basics')
## Date('2026-01-28')
## Author('Author name')
## Institution('Institution name')

# ===== PREAMBLE =====
DOCUMENT();
loadMacros(
	"PGstandard.pl",
	"MathObjects.pl",
	"PGML.pl",
	"PGcourse.pl",
);

# ===== SETUP =====
Context("Numeric");
$a = random(2, 8, 1);
$ans = Real($a + 1);

# ===== STATEMENT =====
BEGIN_PGML
[`Result = `] [____]{$ans}
END_PGML

# ===== SOLUTION =====
# BEGIN_PGML_SOLUTION
# END_PGML_SOLUTION

ENDDOCUMENT();
</pre>
<p>
To adapt this skeleton, replace the OPL header fields with your own metadata, change the Context to match your answer type, set up your random values, and build your answer expression.
</p>

<p>
PG executes sections top-to-bottom, and the PGML block captures variable references at parse time. If you place <code>Context()</code> or answer object definitions after <code>BEGIN_PGML</code>, PGML will not see them because they do not exist yet when the block is parsed.
</p>
<h3>Common failure and fix</h3>
<pre>
Broken: Context("Numeric") after BEGIN_PGML
What you will see: parsing errors or wrong answer checking
Fix: keep Context and answer objects in Setup above PGML
</pre>

<h2>Where does this go?</h2>
<p>
Use the following table as a quick lookup for deciding which section a new line of code belongs in.
</p>
<table class="mt-responsive-table">
	<caption>Where does this go?: task, section, and example.</caption>
	<colgroup>
		<col style="width: 36%;">
		<col style="width: 24%;">
		<col style="width: 40%;">
	</colgroup>
	<thead>
		<tr>
			<th>Task</th>
			<th>Section</th>
			<th>Example</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Task">Tag the problem</td>
			<td data-th="Section">OPL header</td>
			<td data-th="Example"><code>## TITLE('...')</code></td>
		</tr>
		<tr>
			<td data-th="Task">Load macros</td>
			<td data-th="Section">Preamble</td>
			<td data-th="Example"><code>loadMacros(...)</code></td>
		</tr>
		<tr>
			<td data-th="Task">Choose a context</td>
			<td data-th="Section">Setup</td>
			<td data-th="Example"><code>Context("Numeric")</code></td>
		</tr>
		<tr>
			<td data-th="Task">Random values</td>
			<td data-th="Section">Setup</td>
			<td data-th="Example"><code>$a = random(2, 8, 1);</code></td>
		</tr>
		<tr>
			<td data-th="Task">Attach an answer checker</td>
			<td data-th="Section">Setup</td>
			<td data-th="Example"><code>$ans = Real(...);</code></td>
		</tr>
		<tr>
			<td data-th="Task">Show the prompt text</td>
			<td data-th="Section">Statement</td>
			<td data-th="Example"><code>BEGIN_PGML ... END_PGML</code></td>
		</tr>
		<tr>
			<td data-th="Task">Show a hint or solution</td>
			<td data-th="Section">Solution</td>
			<td data-th="Example"><code>BEGIN_PGML_SOLUTION</code></td>
		</tr>
	</tbody>
</table>

<p>
Most WeBWorK examples describe a PG file as having several sections (description, initialization,
setup, text, answers/solutions). That model is still useful, but when you write PGML-first (see <a href="/@go/page/488661">Breaking Down the Components</a> for a detailed breakdown), the
roles shift:
</p>

<h2>Recommended sections (PGML-first)</h2>
<ol>
	<li>
		<strong>OPL header</strong>: metadata comments for searchability and attribution.
	</li>
	<li>
		<strong>Preamble</strong>: <code>DOCUMENT();</code> and <code>loadMacros(...)</code>.
	</li>
	<li>
		<strong>Setup</strong>: define variables and answers, pick a context, set tolerances.
	</li>
	<li>
		<strong>Statement (PGML)</strong>: the prompt between <code>BEGIN_PGML</code> and <code>END_PGML</code>
		(see <a href="/@go/page/555703">Introduction to PGML</a> for PGML syntax).
	</li>
	<li>
		<strong>Solution (optional)</strong>: use <code>BEGIN_PGML_SOLUTION</code> or
		<code>BEGIN_PGML_HINT</code> when you want a structured solution.
	</li>
	<li>
		<strong>End</strong>: <code>ENDDOCUMENT();</code>.
	</li>
</ol>

<h2>Why answers often live inside the PGML text</h2>
<p>
When you attach the correct answer directly to an answer blank (for example
<code>[______]{Real(12)}</code>), the connection between prompt and grading stays obvious. This is
especially helpful for science prompts with multiple values and multiple parts.
</p>

<p>
When answers live next to the text they grade, it is much easier to see why a student got
something wrong.
</p>

<p>
Rule of thumb: if it is a sentence the student reads, it belongs in PGML.
</p>

<h3>Next, depending on what you are doing:</h3>
<ul>
	<li>Need the OPL header? Go to <a href="/@go/page/557378">OPL Header and Metadata</a>.</li>
	<li>Need a clean starter .pg skeleton? Go to <a href="/@go/page/488657">PG Problem Files</a>.</li>
	<li>Need macro help? Go to <a href="/@go/page/488659">Common PG Macros</a>.</li>
	<li>Copied legacy code? Go to <a href="/@go/page/555742">Legacy PG and deprecated patterns</a>.</li>
</ul>
