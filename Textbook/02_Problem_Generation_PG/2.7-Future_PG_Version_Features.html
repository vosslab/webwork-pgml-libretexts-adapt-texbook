<p>
This guide targets the PG 2.17 subset available in ADAPT and the standalone
<code>webwork-pg-renderer</code>. Newer PG releases add features that are not yet
available in this environment, but understanding what is coming helps you plan
problems that will benefit from future upgrades and avoid reinventing patterns
that already exist upstream.
</p>

<p>
<strong>Use this page when:</strong> you see a feature in online examples or the
OpenWeBWorK wiki that does not work in ADAPT and want to know which PG version
introduced it.
</p>

<h2>How to read this page</h2>
<ul>
	<li>Features listed under each version are <em>cumulative</em>: PG 2.19 includes everything from 2.18 and earlier.</li>
	<li>Items marked <strong>(PG only)</strong> are changes to the problem-authoring language. Items marked <strong>(WW only)</strong> are server or UI changes that do not affect .pg files.</li>
	<li>The textbook currently targets <strong>PG 2.17</strong>. Everything below that line already works in ADAPT.</li>
</ul>

<h2>PG 2.17 (current ADAPT baseline)</h2>
<p>
This is what ADAPT and the standalone renderer support today. Key features
already documented in this textbook:
</p>
<ul>
	<li>Java and Flash applet support removed (problems using them will show a warning).</li>
	<li>GraphTool additions: point tool, three-point quadratic tool, four-point cubic tool, and keyboard controls for accessibility.</li>
	<li>DraggableProof updated to work in Gateway quizzes when written correctly.</li>
	<li>MathQuill input improvements for expressions and units.</li>
</ul>

<h2>PG 2.18 features (not yet in ADAPT)</h2>
<p>
PG 2.18 is the first version with significant new authoring capabilities beyond
what ADAPT currently supports.
</p>

<h3>New PGML syntax</h3>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 35%;">
		<col style="width: 65%;">
	</colgroup>
	<thead>
		<tr>
			<th>Feature</th>
			<th>What it does</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Feature">PGML images</td>
			<td data-th="What it does">Insert images with <code>[!alt text!]{image source}{width}{height}</code> directly in PGML instead of using command substitution or HTML.</td>
		</tr>
	</tbody>
</table>

<h3>New macros</h3>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 30%;">
		<col style="width: 70%;">
	</colgroup>
	<thead>
		<tr>
			<th>Macro</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Macro"><code>plotly3D.pl</code></td>
			<td data-th="Description">Plot 3D curves and surfaces using the plotly.js library. Useful for visualizing molecular structures, reaction coordinate diagrams, or any data that needs a third axis.</td>
		</tr>
		<tr>
			<td data-th="Macro"><code>randomPerson.pl</code></td>
			<td data-th="Description">Generate a random person name with correct pronoun methods (he/she/they). Produces inclusive, readable story problems.</td>
		</tr>
		<tr>
			<td data-th="Macro"><code>parserCheckboxList.pl</code></td>
			<td data-th="Description">Native checkbox answer type for select-all-that-apply questions. Replaces the RadioButtons-per-statement workaround documented in <a href="/@go/page/555716">Section 5.3</a>.</td>
		</tr>
		<tr>
			<td data-th="Macro"><code>parserRadioMultiAnswer.pl</code></td>
			<td data-th="Description">Tie a radio answer together with dependent answer blanks that change based on the radio choice. Useful for branching questions.</td>
		</tr>
		<tr>
			<td data-th="Macro"><code>parserLinearRelation.pl</code></td>
			<td data-th="Description">Context for lines and linear inequalities as MathObjects.</td>
		</tr>
		<tr>
			<td data-th="Macro"><code>specialTrigValues.pl</code></td>
			<td data-th="Description">Standard trig values on the unit circle as a helper macro.</td>
		</tr>
	</tbody>
</table>

<h3>Updated macros</h3>
<ul>
	<li><strong>niceTables.pl</strong>: Completely overhauled. If you are writing table-heavy problems, the 2.18 version has better options and cleaner syntax than what is documented in <a href="/@go/page/555724">Section 6.2</a>.</li>
	<li><strong>parserCheckboxList.pl / parserRadioButtons.pl</strong>: Past-answer display now shows meaningful labels instead of B0, B1, etc.</li>
	<li><strong>parserGraphTool.pl</strong>: Number line mode for intervals, default answer checkers, a <code>generateAnswerGraph</code> method for solutions, and a dynamic help system.</li>
	<li><strong>parserPopUp.pl</strong>: New <code>DropDown</code> method as a modern replacement for <code>PopUp</code>.</li>
</ul>

<h3>Other PG 2.18 changes</h3>
<ul>
	<li>MathQuill: typing <code>deg</code> produces a degree symbol; trig and log functions auto-wrap arguments in parentheses.</li>
	<li>Units: students can enter °C and °F directly; many new units added (angstroms, microseconds, picometers, etc.); plural forms accepted (30 ft, 30 feet, 1 foot).</li>
	<li>Hardcopy generation revamped with a theme system (eleven themes included).</li>
	<li>LTI 1.3 authentication module added.</li>
</ul>

<h2>PG 2.19 features (not yet in ADAPT)</h2>
<p>
PG 2.19 adds several quality-of-life improvements for PGML authoring.
</p>

<h3>New PGML syntax</h3>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 35%;">
		<col style="width: 65%;">
	</colgroup>
	<thead>
		<tr>
			<th>Feature</th>
			<th>What it does</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Feature">PGML tables</td>
			<td data-th="What it does">Create tables directly in PGML blocks using niceTables.pl syntax. The macro is automatically loaded when using PGML, so no explicit <code>loadMacros</code> call is needed.</td>
		</tr>
		<tr>
			<td data-th="Feature">HTML div/span tags in PGML</td>
			<td data-th="What it does">Add HTML <code>&lt;div&gt;</code> or <code>&lt;span&gt;</code> tags within PGML using <code>[&lt; ... &gt;]</code> syntax. This replaces the MODES workaround for wrapper divs documented in <a href="/@go/page/555725">Section 6.3</a>.</td>
		</tr>
		<tr>
			<td data-th="Feature">Horizontal rules fixed</td>
			<td data-th="What it does">PGML horizontal rules updated and made reliable.</td>
		</tr>
	</tbody>
</table>

<h3>New macros and MathObjects</h3>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 30%;">
		<col style="width: 70%;">
	</colgroup>
	<thead>
		<tr>
			<th>Macro</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Macro"><code>contextBoolean.pl</code></td>
			<td data-th="Description">Boolean MathObject context with parsing of boolean expressions, reduction rules with AND/OR, and customizable true/false symbols including unicode. Relevant for logic gates in genetics or Boolean search problems.</td>
		</tr>
		<tr>
			<td data-th="Macro"><code>parserMultipleChoice.pl</code></td>
			<td data-th="Description">Umbrella macro that loads all multiple choice parsers at once: PopUp, CheckboxList, RadioButtons, RadioMultiAnswer. Simplifies the <code>loadMacros</code> block.</td>
		</tr>
	</tbody>
</table>

<h3>Other PG 2.19 changes</h3>
<ul>
	<li><strong>Matrix MathObjects</strong>: New methods for creating zero, permutation, and elementary matrices; tests for triangular, orthogonal, diagonal, symmetric, row echelon, and reduced row echelon forms.</li>
	<li><strong>Fraction MathObjects</strong>: New <code>num</code> and <code>den</code> methods for extracting numerator and denominator.</li>
	<li><strong>Compute behavior</strong>: Calling <code>Compute</code> on a number now creates a Real directly instead of stringifying and passing to Formula.</li>
	<li><strong>Knowls</strong>: Reworked to open in modal dialogs instead of inline expansion.</li>
	<li>The attempts table has been removed; feedback is now associated directly with each answer blank. <strong>(WW only)</strong></li>
	<li>The PG editor now has an option to convert problems to PGML (use with care, conversion is not complete). <strong>(WW only)</strong></li>
</ul>

<h3>Breaking changes in PG 2.19</h3>
<ul>
	<li><strong>parserPopUp.pl default change</strong>: When the correct answer is a non-negative integer, it is now treated as an index into the answer array (consistent with other macros) rather than the literal answer string. Problems using integer values as PopUp answers may need updating.</li>
</ul>

<h3>Deprecated in PG 2.19</h3>
<ul>
	<li><strong>compoundProblem.pl</strong> (all versions: compoundProblem.pl, compoundProblem2.pl, compoundProblem5.pl): Migrate to <code>scaffold.pl</code> instead.</li>
</ul>

<h2>PG 2.20 features (current release)</h2>
<p>
PG 2.20 focuses on graphing tool improvements, modern plotting, units as
MathObjects, and cleanup of deprecated patterns.
</p>

<h3>New macros and features</h3>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 30%;">
		<col style="width: 70%;">
	</colgroup>
	<thead>
		<tr>
			<th>Macro / Feature</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Macro / Feature"><code>plots.pl</code></td>
			<td data-th="Description">Modern, efficient plotting macro for a wide variety of graph types. Intended as a more capable replacement for older graphing approaches.</td>
		</tr>
		<tr>
			<td data-th="Macro / Feature"><code>contextUnits.pl</code></td>
			<td data-th="Description">Units implemented as MathObject classes. Students can enter answers with units and have them graded as part of the MathObject framework.</td>
		</tr>
		<tr>
			<td data-th="Macro / Feature"><code>contextExtensions.pl</code></td>
			<td data-th="Description">New context extension mechanism. Fraction contexts are now extensions of the parent context rather than standalone replacements.</td>
		</tr>
	</tbody>
</table>

<h3>Updated macros</h3>
<ul>
	<li><strong>parserGraphTool.pl</strong>: Four new tools added: polygon tool, sine wave tool, vector tool, and improved fill tool.</li>
	<li><strong>contextReaction.pl</strong>: Improvements to chemical reaction context. Relevant for chemistry and biochemistry problems.</li>
	<li><strong>parserPopUp.pl</strong>: Full HTML now supported in drop-down menu items (bold, subscripts, etc.).</li>
	<li><strong>Degree n matrices</strong>: Improvements to matrices/tensors with more than two dimensions.</li>
	<li><strong>Rserve interface</strong>: Rewritten within PG; the <code>Statistics::R::IO::Rserve</code> package is no longer required.</li>
</ul>

<h3>Breaking changes in PG 2.20</h3>
<ul>
	<li><strong><code>custom_problem_grader_0_60_100</code> removed</strong>: Problems must be converted to use <code>custom_problem_grader_fluid</code> instead. This is relevant if you copy older problems that use the 0/60/100 grading scale.</li>
	<li><strong>Degree 1 vs degree 2 matrix comparison</strong>: Changed behavior when comparing a degree 1 matrix and a degree 2 matrix.</li>
</ul>

<h3>WeBWorK 2.20 server changes <strong>(WW only)</strong></h3>
<ul>
	<li>Problem editor upgraded to CodeMirror 6 with accordioning, autocompletion, and improved syntax highlighting.</li>
	<li>Security vulnerability fixes and database efficiency improvements.</li>
	<li>Problems can now be loaded directly from the Problem Editor or from sample problems.</li>
</ul>

<h2>What this means for ADAPT authors today</h2>
<p>
Until ADAPT upgrades its PG version, the workarounds documented in this textbook
remain necessary. Here is a summary of what changes when ADAPT eventually updates:
</p>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 35%;">
		<col style="width: 30%;">
		<col style="width: 35%;">
	</colgroup>
	<thead>
		<tr>
			<th>Current workaround</th>
			<th>Available in</th>
			<th>What replaces it</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Current workaround">RadioButtons per statement for select-all-that-apply (<a href="/@go/page/555716">Section 5.3</a>)</td>
			<td data-th="Available in">PG 2.18</td>
			<td data-th="What replaces it">Native <code>parserCheckboxList.pl</code> with proper checkbox UI</td>
		</tr>
		<tr>
			<td data-th="Current workaround">PopUp for dropdown menus</td>
			<td data-th="Available in">PG 2.18</td>
			<td data-th="What replaces it"><code>DropDown</code> method in <code>parserPopUp.pl</code></td>
		</tr>
		<tr>
			<td data-th="Current workaround">MODES wrapper for flexbox divs in matching layouts (<a href="/@go/page/555725">Section 6.3</a>)</td>
			<td data-th="Available in">PG 2.19</td>
			<td data-th="What replaces it"><code>[&lt; ... &gt;]</code> div/span syntax in PGML</td>
		</tr>
		<tr>
			<td data-th="Current workaround">Explicit <code>loadMacros("niceTables.pl")</code> for tables</td>
			<td data-th="Available in">PG 2.19</td>
			<td data-th="What replaces it">niceTables.pl auto-loaded with PGML</td>
		</tr>
		<tr>
			<td data-th="Current workaround">Command substitution or HTML for images in PGML</td>
			<td data-th="Available in">PG 2.18</td>
			<td data-th="What replaces it">Native <code>[!alt!]{src}{w}{h}</code> PGML image syntax</td>
		</tr>
		<tr>
			<td data-th="Current workaround">No 3D visualization available</td>
			<td data-th="Available in">PG 2.18</td>
			<td data-th="What replaces it"><code>plotly3D.pl</code> for 3D curves and surfaces</td>
		</tr>
		<tr>
			<td data-th="Current workaround">TikZ images not available</td>
			<td data-th="Available in">PG 2.16+</td>
			<td data-th="What replaces it"><code>PGtikz.pl</code> for LaTeX-quality vector graphics (requires server-side LaTeX; not available in ADAPT's renderer subset)</td>
		</tr>
		<tr>
			<td data-th="Current workaround">Plain text in PopUp/DropDown menu items</td>
			<td data-th="Available in">PG 2.20</td>
			<td data-th="What replaces it">Full HTML in drop-down items (bold, subscripts, special characters)</td>
		</tr>
		<tr>
			<td data-th="Current workaround"><code>custom_problem_grader_0_60_100</code></td>
			<td data-th="Available in">PG 2.20</td>
			<td data-th="What replaces it">Removed. Use <code>custom_problem_grader_fluid</code> instead</td>
		</tr>
		<tr>
			<td data-th="Current workaround">PGgraphmacros.pl for static plots</td>
			<td data-th="Available in">PG 2.20</td>
			<td data-th="What replaces it"><code>plots.pl</code> for modern, efficient graph generation</td>
		</tr>
		<tr>
			<td data-th="Current workaround">No native unit-aware answer checking</td>
			<td data-th="Available in">PG 2.20</td>
			<td data-th="What replaces it"><code>contextUnits.pl</code> for units as MathObject classes</td>
		</tr>
	</tbody>
</table>

<h2>Apply it today</h2>
<ul>
	<li>Write problems using the PG 2.17 patterns in this textbook. They will continue to work in newer versions.</li>
	<li>When ADAPT upgrades, revisit select-all-that-apply problems (switch from RadioButtons fallback to CheckboxList) and matching layouts (replace MODES wrappers with PGML div syntax).</li>
	<li>Do not use TikZ, plotly3D, plots.pl, contextUnits.pl, CheckboxList, RadioMultiAnswer, or DropDown in problems intended for the current ADAPT environment.</li>
	<li>If you copy a problem that uses <code>custom_problem_grader_0_60_100</code>, replace it with <code>custom_problem_grader_fluid</code> (required in PG 2.20, works in all versions).</li>
</ul>

<p><strong>Next, depending on what you are doing:</strong></p>
<ul>
	<li>Need the current macro allowlist? Go to <a href="/@go/page/488659">Section 2.5</a>.</li>
	<li>Copied legacy code and it looks strange? Go to <a href="/@go/page/555742">Section 2.6</a>.</li>
	<li>Ready to write your first problem? Go to <a href="/@go/page/488657">Section 2.3</a>.</li>
</ul>

<p>{{template.ShowOrg()}}</p>
