<p>
This page only covers the PG you need to support a PGML prompt.
</p>

<p>
Use this page when starting a new file or diagnosing a broken one.
</p>

<p>
A WeBWorK problem is typically stored in a file with a <code>.pg</code> extension. The file is a
mix of:
</p>
<ul>
	<li>Comments (for authors)</li>
	<li>PG code (setup and answer checking)</li>
	<li>PGML text blocks (the student-facing prompt)</li>
</ul>

<h2>Common structure (five sections)</h2>
<p>
Most <code>.pg</code> files follow a predictable structure. When you know the structure, you can
read problems faster and keep your own authoring consistent.
</p>
<ol>
	<li>
		<strong>Tagging and description</strong>: comments and metadata that help humans and indexing
		systems.
	</li>
	<li><strong>Initialization</strong>: <code>DOCUMENT();</code> and <code>loadMacros(...);</code>.</li>
	<li><strong>Problem setup</strong>: contexts, variables, randomization, answer objects.</li>
	<li><strong>Text</strong>: the student-facing prompt, typically in <code>BEGIN_PGML</code>.</li>
	<li>
		<strong>Optional solution and extras</strong>: hints/solutions and any remaining answer setup.
		With PGML-first authoring, answers are usually attached directly to blanks, so a separate
		answer section is often unnecessary.
	</li>
</ol>

<h2>Minimal PGML-first template</h2>
<p>
This template shows the intended structure: short setup, then a PGML prompt.
</p>

<pre>
DOCUMENT();

loadMacros(
	"PGstandard.pl",
	"MathObjects.pl",
	"PGML.pl",
	"PGcourse.pl",
);

Context("Numeric");

$c_stock = random(10, 50, 5);   # mM
$v_stock = random(1, 5, 1);     # mL
$v_final = random(10, 50, 5);   # mL

$c_final = Real($c_stock * $v_stock / $v_final);

BEGIN_PGML
You are preparing a dilution from a stock solution.
The stock concentration is [`c_{stock} = [$c_stock]`] mM.
You pipet [`V_{stock} = [$v_stock]`] mL of stock and bring the total volume to
[`V_{final} = [$v_final]`] mL.

What is the final concentration [`c_{final}`] in mM?

[`c_{final} = `] [________]{$c_final} mM
END_PGML

ENDDOCUMENT();
</pre>

<h2>Annotated skeleton (recommended)</h2>
<p>
When you are learning, it helps to keep a short commented skeleton and copy-edit it rather than
starting from a blank file.
</p>

<pre>
# 1) Tagging and description (optional, but useful)
# DESCRIPTION
# ... summary for future authors ...
# ENDDESCRIPTION

# 2) Initialization (required)
DOCUMENT();
loadMacros(
	"PGstandard.pl",
	"MathObjects.pl",
	"PGML.pl",
	"PGcourse.pl",
);

# 3) Setup (keep small)
Context("Numeric");
# ... choose random values ...
# ... define answer objects and graders ...

# 4) Text (student-facing prompt)
BEGIN_PGML
... prompt text ...
... answer blanks tied to answers ...
END_PGML

# 5) Optional hint/solution blocks
# BEGIN_PGML_HINT ... END_PGML_HINT
# BEGIN_PGML_SOLUTION ... END_PGML_SOLUTION

ENDDOCUMENT();
</pre>

<h2>What to keep stable</h2>
<ul>
	<li>Always include <code>DOCUMENT();</code> and <code>ENDDOCUMENT();</code>.</li>
	<li>Always load <code>PGML.pl</code> when you use <code>BEGIN_PGML</code>.</li>
	<li>Keep setup code short and readable; your future self will thank you.</li>
</ul>
