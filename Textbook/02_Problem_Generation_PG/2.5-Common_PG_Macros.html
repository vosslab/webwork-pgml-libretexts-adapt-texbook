<p>
This page is not a catalog of everything PG can do. It is a short list of macros you will
actually see and use when writing PGML-first science problems.
</p>

<p>
<strong>Use this page when:</strong> a problem will not render, a widget is missing, or you are
adding a new interaction type.
</p>

<p>
This guide reflects the PG 2.17 subset used in ADAPT and webwork-pg-renderer. Some macros used in
online examples are missing in this subset, so check the allowlist before you add a new file to
<code>loadMacros()</code>.
</p>

<p>
For the full comparison table, see <code>docs/PG_MACRO_VERSION_COMPARISON.md</code>.
</p>

<h2>Copy and edit (minimal macro set)</h2>
<pre>
DOCUMENT();

loadMacros(
	"PGstandard.pl",
	"MathObjects.pl",
	"PGML.pl",
	"PGcourse.pl",
);
</pre>

<p><strong>Common failure and fix</strong></p>
<pre>
Broken: RadioButtons(...) without parserRadioButtons.pl
What you will see: Undefined subroutine &amp;main::RadioButtons called
Fix: add "parserRadioButtons.pl" to loadMacros()
</pre>

<h2>Core macros for PGML-first problems</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 22%;">
		<col style="width: 38%;">
		<col style="width: 40%;">
	</colgroup>
	<thead>
		<tr>
			<th>Macro</th>
			<th>What it enables</th>
			<th>What breaks if it is missing</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Macro">PGstandard.pl</td>
			<td data-th="What it enables">Core PG helpers and defaults.</td>
			<td data-th="What breaks if it is missing">Basic PG functions are undefined.</td>
		</tr>
		<tr>
			<td data-th="Macro">PGML.pl</td>
			<td data-th="What it enables">PGML blocks, formatting, and answer blanks.</td>
			<td data-th="What breaks if it is missing">PGML blocks fail or render as raw text.</td>
		</tr>
		<tr>
			<td data-th="Macro">PGcourse.pl</td>
			<td data-th="What it enables">Course-level helpers and defaults.</td>
			<td data-th="What breaks if it is missing">Course-specific helpers are undefined.</td>
		</tr>
		<tr>
			<td data-th="Macro">MathObjects.pl</td>
			<td data-th="What it enables">MathObjects: Real, Formula, Compute, Context.</td>
			<td data-th="What breaks if it is missing">Needed when using Real(), Compute(), Formula(), or Context(). Not required for RadioButtons or CheckboxList.</td>
		</tr>
	</tbody>
</table>
<p>
<strong>Note:</strong> MathObjects.pl is included in most science problems because they use numeric
answers with Real() or Compute(). For pure multiple-choice or matching problems that do not
compute numeric values, it can be omitted.
</p>

<h2>Add-ons by interaction type</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 34%;">
		<col style="width: 28%;">
		<col style="width: 38%;">
	</colgroup>
	<thead>
		<tr>
			<th>What students see</th>
			<th>Macro to load</th>
			<th>Notes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="What students see">Single-choice questions (radio buttons)</td>
			<td data-th="Macro to load">parserRadioButtons.pl</td>
			<td data-th="Notes">Visible options, one correct choice.</td>
		</tr>
		<tr>
			<td data-th="What students see">Matching or shuffled lists</td>
			<td data-th="Macro to load">PGchoicemacros.pl</td>
			<td data-th="Notes">Matching and choice helpers.</td>
		</tr>
		<tr>
			<td data-th="What students see">Targeted feedback for common errors</td>
			<td data-th="Macro to load">answerHints.pl</td>
			<td data-th="Notes">Instructor-style feedback without extra widgets.</td>
		</tr>
	</tbody>
</table>

<h2>Macro availability (subset vs full PG)</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 36%;">
		<col style="width: 21%;">
		<col style="width: 21%;">
		<col style="width: 22%;">
	</colgroup>
	<thead>
		<tr>
			<th>Macro file</th>
			<th>ADAPT/renderer subset</th>
			<th>Full PG 2.17+</th>
			<th>PG 2.20</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Macro file">PGML.pl</td>
			<td data-th="ADAPT/renderer subset">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="PG 2.20">Yes</td>
		</tr>
		<tr>
			<td data-th="Macro file">MathObjects.pl</td>
			<td data-th="ADAPT/renderer subset">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="PG 2.20">Yes</td>
		</tr>
		<tr>
			<td data-th="Macro file">parserRadioButtons.pl</td>
			<td data-th="ADAPT/renderer subset">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="PG 2.20">Yes</td>
		</tr>
		<tr>
			<td data-th="Macro file">parserCheckboxList.pl</td>
			<td data-th="ADAPT/renderer subset">No</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="PG 2.20">Yes</td>
		</tr>
		<tr>
			<td data-th="Macro file">VectorListCheckers.pl</td>
			<td data-th="ADAPT/renderer subset">No</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="PG 2.20">Yes</td>
		</tr>
	</tbody>
</table>

<h2>What macro availability means for you</h2>
<p>
The ADAPT/renderer subset is based on PG 2.17 but uses a flattened macro tree with some files
removed. This affects what widgets and helpers you can use in problems.
</p>

<h3>Parser widgets: Key differences</h3>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 28%;">
		<col style="width: 18%;">
		<col style="width: 18%;">
		<col style="width: 36%;">
	</colgroup>
	<thead>
		<tr>
			<th>Widget</th>
			<th>ADAPT/renderer</th>
			<th>Full PG 2.17+</th>
			<th>Notes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Widget">PopUp</td>
			<td data-th="ADAPT/renderer">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="Notes">Use for matching dropdowns (see Chapter 6.3)</td>
		</tr>
		<tr>
			<td data-th="Widget">RadioButtons</td>
			<td data-th="ADAPT/renderer">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="Notes">Use for single-choice questions and per-statement True/False</td>
		</tr>
		<tr>
			<td data-th="Widget">CheckboxList</td>
			<td data-th="ADAPT/renderer">No</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="Notes">Not available. Use RadioButtons per statement instead (Chapter 6.4)</td>
		</tr>
		<tr>
			<td data-th="Widget">DropDown</td>
			<td data-th="ADAPT/renderer">No</td>
			<td data-th="Full PG 2.17+">No</td>
			<td data-th="Notes">PG 2.18+ only. Use PopUp in ADAPT/renderer</td>
		</tr>
	</tbody>
</table>

<h3>Core macros: All available</h3>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 28%;">
		<col style="width: 18%;">
		<col style="width: 18%;">
		<col style="width: 36%;">
	</colgroup>
	<thead>
		<tr>
			<th>Macro</th>
			<th>ADAPT/renderer</th>
			<th>Full PG 2.17+</th>
			<th>Notes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Macro">PGML.pl</td>
			<td data-th="ADAPT/renderer">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="Notes">Always load this for PGML blocks</td>
		</tr>
		<tr>
			<td data-th="Macro">PGstandard.pl</td>
			<td data-th="ADAPT/renderer">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="Notes">Core PG functions</td>
		</tr>
		<tr>
			<td data-th="Macro">MathObjects.pl</td>
			<td data-th="ADAPT/renderer">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="Notes">Required for Real(), Compute(), Formula()</td>
		</tr>
		<tr>
			<td data-th="Macro">niceTables.pl</td>
			<td data-th="ADAPT/renderer">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="Notes">The only supported way to create tables (see Chapter 6.2)</td>
		</tr>
	</tbody>
</table>

<h3>Context macros: Most available, some missing</h3>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 28%;">
		<col style="width: 18%;">
		<col style="width: 18%;">
		<col style="width: 36%;">
	</colgroup>
	<thead>
		<tr>
			<th>Macro</th>
			<th>ADAPT/renderer</th>
			<th>Full PG 2.17+</th>
			<th>Notes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Macro">contextUnits.pl</td>
			<td data-th="ADAPT/renderer">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="Notes">Unit-aware parsing for science problems</td>
		</tr>
		<tr>
			<td data-th="Macro">contextReaction.pl</td>
			<td data-th="ADAPT/renderer">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="Notes">Chemical reaction input validation</td>
		</tr>
		<tr>
			<td data-th="Macro">VectorListCheckers.pl</td>
			<td data-th="ADAPT/renderer">No</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="Notes">Vector list validation not available in subset</td>
		</tr>
	</tbody>
</table>

<h3>What this means for problem authors</h3>
<ul>
	<li><strong>Use PopUp and RadioButtons:</strong> These work reliably across all PG versions and are available in the ADAPT/renderer subset.</li>
	<li><strong>Avoid CheckboxList:</strong> It's not in the PG 2.17 subset. Use RadioButtons per statement instead (see Chapter 6.4 for the pattern).</li>
	<li><strong>Check the allowlist before copying:</strong> Online examples may use macros that aren't in the subset. Always verify against the allowlist in <code>docs/PG_2_17_RENDERER_MACROS.md</code>.</li>
	<li><strong>Use niceTables.pl for all tables:</strong> HTML table tags (<code>&lt;table&gt;</code>, <code>&lt;tr&gt;</code>, <code>&lt;td&gt;</code>) are blocked. niceTables.pl is the only supported way to create tables.</li>
	<li><strong>Test locally:</strong> Use the local renderer (Chapter 7) to catch missing macros before deploying to ADAPT.</li>
</ul>

<h2>When a macro is missing</h2>
<p>
If you try to load a macro that's not in the ADAPT/renderer subset, you'll see an error. Here's how
to diagnose and fix it.
</p>

<h3>Symptoms of a missing macro</h3>
<ul>
	<li><strong>"Can't locate [MacroFile].pl" error:</strong> The macro file doesn't exist in the renderer's macro search path.</li>
	<li><strong>"Undefined subroutine" error:</strong> A function from a missing macro was called (e.g., <code>CheckboxList()</code> without <code>parserCheckboxList.pl</code>).</li>
	<li><strong>Widget doesn't appear:</strong> The problem renders but the expected checkbox list, dropdown, or other widget is missing.</li>
</ul>

<h3>How to diagnose</h3>
<ol>
	<li><strong>Check the allowlist:</strong> Open <code>docs/PG_2_17_RENDERER_MACROS.md</code> and search for the macro file name. If it's not listed, it's not available.</li>
	<li><strong>Test locally with renderer:</strong> Run the problem through the local renderer (Chapter 7.1). The error message will tell you which macro failed to load and where it was called.</li>
	<li><strong>Search for alternatives:</strong> Look for similar functionality in macros that ARE in the allowlist. For example, use <code>PopUp</code> instead of <code>DropDown</code>.</li>
</ol>

<h3>Common workarounds</h3>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 30%;">
		<col style="width: 35%;">
		<col style="width: 35%;">
	</colgroup>
	<thead>
		<tr>
			<th>Missing macro</th>
			<th>What it provided</th>
			<th>Workaround</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Missing macro">parserCheckboxList.pl</td>
			<td data-th="What it provided">Checkbox lists for multiple correct answers</td>
			<td data-th="Workaround">Use RadioButtons per statement (True/False), see Chapter 6.4</td>
		</tr>
		<tr>
			<td data-th="Missing macro">DropDown (PG 2.18+)</td>
			<td data-th="What it provided">Modern dropdown widget</td>
			<td data-th="Workaround">Use PopUp from parserPopUp.pl (same functionality)</td>
		</tr>
		<tr>
			<td data-th="Missing macro">VectorListCheckers.pl</td>
			<td data-th="What it provided">Vector list validation helpers</td>
			<td data-th="Workaround">Use MathObjects Vector context directly or simplify to scalar answers</td>
		</tr>
	</tbody>
</table>

<h3>Prevention</h3>
<ul>
	<li>Before copying code from online examples, check the macro list against the allowlist.</li>
	<li>Use templates from Appendix 90.1, which are verified to work with the PG 2.17 subset.</li>
	<li>Test problems locally (Chapter 7.1) before deploying to ADAPT.</li>
</ul>

<h2>Science-native contexts and grading helpers</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 34%;">
		<col style="width: 26%;">
		<col style="width: 40%;">
	</colgroup>
	<thead>
		<tr>
			<th>Use it when</th>
			<th>Macro to load</th>
			<th>Why it matters</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Use it when">Units are part of correctness</td>
			<td data-th="Macro to load">contextUnits.pl</td>
			<td data-th="Why it matters">Supports unit-aware parsing and validation.</td>
		</tr>
		<tr>
			<td data-th="Use it when">You need chemical reaction input</td>
			<td data-th="Macro to load">contextReaction.pl</td>
			<td data-th="Why it matters">Validates reactants/products and reaction structure.</td>
		</tr>
		<tr>
			<td data-th="Use it when">Multiple blanks depend on each other</td>
			<td data-th="Macro to load">parserMultiAnswer.pl</td>
			<td data-th="Why it matters">Ties related blanks to one checker.</td>
		</tr>
		<tr>
			<td data-th="Use it when">Parts should contribute different weights</td>
			<td data-th="Macro to load">weightedGrader.pl</td>
			<td data-th="Why it matters">Supports weighted scoring across parts.</td>
		</tr>
		<tr>
			<td data-th="Use it when">Order should not matter in a list</td>
			<td data-th="Macro to load">unorderedAnswer.pl</td>
			<td data-th="Why it matters">Grades set-style answers without order.</td>
		</tr>
	</tbody>
</table>

<h2>Tables, layouts, and visual tools</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 34%;">
		<col style="width: 26%;">
		<col style="width: 40%;">
	</colgroup>
	<thead>
		<tr>
			<th>Use it when</th>
			<th>Macro to load</th>
			<th>Why it matters</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Use it when">You need structured tables or aligned blanks</td>
			<td data-th="Macro to load">niceTables.pl / unionTables.pl</td>
			<td data-th="Why it matters">Keeps data displays clean and readable.</td>
		</tr>
		<tr>
			<td data-th="Use it when">You want scaffolded, multi-part prompts</td>
			<td data-th="Macro to load">scaffold.pl</td>
			<td data-th="Why it matters">Supports structured sections without custom logic.</td>
		</tr>
		<tr>
			<td data-th="Use it when">An interactive graph tool is required</td>
			<td data-th="Macro to load">parserGraphTool.pl</td>
			<td data-th="Why it matters">Provides interactive graph widgets.</td>
		</tr>
	</tbody>
</table>

<h2>Symptoms when missing</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 38%;">
		<col style="width: 32%;">
		<col style="width: 30%;">
	</colgroup>
	<thead>
		<tr>
			<th>Symptom</th>
			<th>Likely missing</th>
			<th>Fix</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Symptom">PGML renders as raw text</td>
			<td data-th="Likely missing">PGML.pl</td>
			<td data-th="Fix">Load PGML.pl before BEGIN_PGML.</td>
		</tr>
		<tr>
			<td data-th="Symptom">Radio buttons do not appear</td>
			<td data-th="Likely missing">parserRadioButtons.pl</td>
			<td data-th="Fix">Add parserRadioButtons.pl to loadMacros().</td>
		</tr>
		<tr>
			<td data-th="Symptom">Checkbox list does not appear</td>
			<td data-th="Likely missing">parserCheckboxList.pl (not available)</td>
			<td data-th="Fix">Use per-statement RadioButtons or matching instead.</td>
		</tr>
		<tr>
			<td data-th="Symptom">MathObjects are undefined</td>
			<td data-th="Likely missing">MathObjects.pl</td>
			<td data-th="Fix">Load MathObjects.pl before using Real/Compute.</td>
		</tr>
	</tbody>
</table>

	<p>
	Local render shows the line and missing macro when ADAPT only reports a generic error (<a href="/@go/page/555731">Chapter 7</a>).
	</p>

<h2>Do not cargo-cult</h2>
<ul>
	<li>Remove macros you do not use and re-render.</li>
	<li>Load macros only once per file.</li>
	<li>Let dependencies load themselves; do not list everything "just in case."</li>
</ul>

<p><strong>Next, depending on what you are doing:</strong></p>
<ul>
	<li>Not sure where the macro block belongs? Go to Section 2.4.</li>
	<li>Need a clean starter .pg skeleton? Go to Section 2.3.</li>
	<li>Copied legacy code? Go to Section 2.6.</li>
</ul>
