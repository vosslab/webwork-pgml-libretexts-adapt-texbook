<p>
This page only covers the PG you need to support a PGML prompt.
</p>
<p>
Use this page when starting a new file or diagnosing a broken one.
</p>

<p>
<strong>Use this page when:</strong> you need a clean, reliable .pg skeleton you can reuse.
</p>

<h2>Copy and edit (PGML-first skeleton)</h2>
<pre>
# ===== OPL HEADER =====
## TITLE('Short descriptive title')
## DESCRIPTION
## One to three sentences describing the task and constraints.
## ENDDESCRIPTION
## KEYWORDS('keyword1','keyword2','keyword3')
## DBsubject('Biochemistry')
## DBchapter('Enzymes')
## DBsection('Kinetics basics')
## Date('2026-01-28')
## Author('Author name')
## Institution('Institution name')

# ===== PREAMBLE =====
DOCUMENT();
loadMacros(
	"PGstandard.pl",
	"MathObjects.pl",
	"PGML.pl",
	"PGcourse.pl",
);

# ===== SETUP =====
Context("Numeric");
$a = random(2, 8, 1);
$b = random(3, 9, 1);
$ans = Real($a + $b);

# ===== STATEMENT =====
BEGIN_PGML
[`Total = `] [____]{$ans}
END_PGML

# ===== SOLUTION =====
# BEGIN_PGML_SOLUTION
# END_PGML_SOLUTION

ENDDOCUMENT();
</pre>

<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 50%;">
		<col style="width: 50%;">
	</colgroup>
	<thead>
		<tr>
			<th>Change this first</th>
			<th>Do not touch yet</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Change this first">
				<ul>
					<li>Prompt text in PGML</li>
					<li>Random ranges and values</li>
				</ul>
			</td>
			<td data-th="Do not touch yet">
				<ul>
					<li>Macro list and order</li>
					<li>DOCUMENT()/ENDDOCUMENT()</li>
				</ul>
			</td>
		</tr>
	</tbody>
</table>

<p><strong>Common failure and fix</strong></p>
<pre>
Broken: BEGIN_PGML before DOCUMENT();
What you will see: PGML block not recognized or raw text output
Fix: Keep DOCUMENT() and loadMacros() above PGML
</pre>

	<p>
	After any macro change, render locally to catch missing macros early (<a href="/@go/page/555731">Chapter 7</a>).
	</p>

<p>
A WeBWorK problem is typically stored in a file with a <code>.pg</code> extension. The file is a
mix of:
</p>
<ul>
	<li>Comments (for authors)</li>
	<li>PG code (setup and answer checking)</li>
	<li>PGML text blocks (the student-facing prompt)</li>
</ul>

<h2>Common structure (five sections)</h2>
<p>
Most <code>.pg</code> files follow a predictable structure. When you know the structure, you can
read problems faster and keep your own authoring consistent.
</p>
<ol>
	<li>
		<strong>OPL header</strong>: metadata comments for searchability and attribution.
	</li>
	<li><strong>Preamble</strong>: <code>DOCUMENT();</code> and <code>loadMacros(...);</code> (see <a href="/@go/page/555710">Section 4.3</a>).</li>
	<li><strong>Setup</strong>: contexts, variables, randomization, answer objects.</li>
	<li><strong>Statement</strong>: the student-facing prompt, typically in <code>BEGIN_PGML</code>.</li>
	<li>
		<strong>Solution (optional)</strong>: hints/solutions and any remaining answer setup.
		With PGML-first authoring, answers are usually attached directly to blanks, so a separate
		answer section is often unnecessary.
	</li>
</ol>

<p>
File structure errors are the most common cause of total failure. Most bugs at this level are
mechanical, not conceptual.
</p>
<h2>Most common failure modes</h2>
<ul>
	<li>Missing <code>DOCUMENT();</code> or <code>ENDDOCUMENT();</code>.</li>
	<li>A macro is loaded after it is needed.</li>
	<li>A PGML block appears outside the document lifecycle.</li>
</ul>

<h2>Annotated skeleton (recommended)</h2>
<p>
When you are learning, it helps to keep a short commented skeleton and copy-edit it rather than
starting from a blank file.
</p>

<pre>
# 1) OPL header (recommended)
## TITLE('Short descriptive title')
## DESCRIPTION
## ... summary for future authors ...
## ENDDESCRIPTION
## KEYWORDS('keyword1','keyword2','keyword3')
## DBsubject('Biochemistry')
## DBchapter('Enzymes')
## DBsection('Kinetics basics')
## Date('2026-01-28')
## Author('Author name')
## Institution('Institution name')

# 2) Initialization (required)
DOCUMENT();
loadMacros(
	"PGstandard.pl",
	"MathObjects.pl",
	"PGML.pl",
	"PGcourse.pl",
);

# 3) Setup (keep small)
Context("Numeric");
# ... choose random values ...
# ... define answer objects and graders ...

# 4) Text (student-facing prompt)
BEGIN_PGML
... prompt text ...
... answer blanks tied to answers ...
END_PGML

# 5) Optional hint/solution blocks
# BEGIN_PGML_HINT ... END_PGML_HINT
# BEGIN_PGML_SOLUTION ... END_PGML_SOLUTION

ENDDOCUMENT();
</pre>

<h2>What to keep stable</h2>
<ul>
	<li>Always include <code>DOCUMENT();</code> and <code>ENDDOCUMENT();</code>.</li>
	<li>Always load <code>PGML.pl</code> when you use <code>BEGIN_PGML</code>.</li>
	<li>Keep setup code short and readable; your future self will thank you.</li>
</ul>

	<h2>Test immediately (recommended)</h2>
	<ul>
		<li>After any macro or setup change, render locally with webwork-pg-renderer (<a href="/@go/page/555731">Chapter 7</a>) to catch missing macros and syntax errors early.</li>
		<li>If local setup feels like too much, preview in ADAPT instead, but expect slower debugging when something breaks.</li>
	</ul>

<p><strong>Next, depending on what you are doing:</strong></p>
<ul>
	<li>Need macro help? Go to <a href="/@go/page/488659">Section 2.5</a>.</li>
	<li>Copied legacy code? Go to <a href="/@go/page/555742">Section 2.6</a>.</li>
	<li>Not sure where setup ends and PGML begins? Go to <a href="/@go/page/488658">Section 2.4</a>.</li>
</ul>
