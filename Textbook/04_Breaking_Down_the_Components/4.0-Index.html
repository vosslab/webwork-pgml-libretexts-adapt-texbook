<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 20%;">
		<col style="width: 40%;">
		<col style="width: 40%;">
	</colgroup>
	<thead>
		<tr>
			<th>Section</th>
			<th>What it controls</th>
			<th>What to check when debugging</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Section">Preamble</td>
			<td data-th="What it controls">Macros, rendering switches, and global knobs.</td>
			<td data-th="What to check when debugging">Missing macro files, wrong load order, or disabled features.</td>
		</tr>
		<tr>
			<td data-th="Section">Setup</td>
			<td data-th="What it controls">Values, constraints, answers, and graders.</td>
			<td data-th="What to check when debugging">Bad ranges, unit mismatches, or tolerance mistakes.</td>
		</tr>
		<tr>
			<td data-th="Section">Statement</td>
			<td data-th="What it controls">PGML prompt text, structure, and blanks.</td>
			<td data-th="What to check when debugging">Blank binding, missing inserts, or formatting breaks.</td>
		</tr>
		<tr>
			<td data-th="Section">Solution</td>
			<td data-th="What it controls">Explanations, trust, and grading alignment.</td>
			<td data-th="What to check when debugging">Mismatch between solution conventions and the checker.</td>
		</tr>
	</tbody>
</table>

<p>
Chapter 4 is a single worked problem sliced into Preamble, Setup, Statement, Solution, and a
Put it together workflow page. It mirrors the OpenWeBWorK PG sample-problem structure so you can
scan each layer quickly and edit the right section first.
</p>

<p>
Running example: a short lab-style prompt that asks for a final concentration in a PCR mix, with
explicit units and one numeric target to grade.
</p>

<p>
Instead of treating a problem as a block of code, this chapter treats it as four parts that each
have a job and each fail in predictable ways. The goal is not to memorize syntax, but to build a
reliable editing habit: change one part, test it quickly, and keep the file readable for the next
person.
</p>

<h2>One-screen anatomy (table version)</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 22%;">
		<col style="width: 39%;">
		<col style="width: 39%;">
	</colgroup>
	<thead>
		<tr>
			<th>Section name</th>
			<th>What readers usually change</th>
			<th>What usually breaks</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Section name">Preamble</td>
			<td data-th="What readers usually change">Macro list, display options, parser features.</td>
			<td data-th="What usually breaks">Missing macro file, wrong load order, or missing feature.</td>
		</tr>
		<tr>
			<td data-th="Section name">Setup</td>
			<td data-th="What readers usually change">Value ranges, answer objects, tolerances.</td>
			<td data-th="What usually breaks">Impossible variants, unit drift, tolerance mismatch.</td>
		</tr>
		<tr>
			<td data-th="Section name">Statement</td>
			<td data-th="What readers usually change">Story wording, tables, blanks, formatting.</td>
			<td data-th="What usually breaks">Unbound blanks, missing variables, malformed PGML.</td>
		</tr>
		<tr>
			<td data-th="Section name">Solution</td>
			<td data-th="What readers usually change">Explanation steps, rounding notes, units.</td>
			<td data-th="What usually breaks">Solution shows a different convention than the checker.</td>
		</tr>
	</tbody>
</table>

<p>
If ADAPT reports only a generic error, do a fast local render from Chapter 7 to get a line number
before you troubleshoot the section tables below.
</p>

<h2>Practical edit map</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 30%;">
		<col style="width: 35%;">
		<col style="width: 35%;">
	</colgroup>
	<thead>
		<tr>
			<th>Task</th>
			<th>Where to edit</th>
			<th>Fast check</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Task">Change values</td>
			<td data-th="Where to edit">Setup (ranges and constraints)</td>
			<td data-th="Fast check">Render 3 seeds and scan the units.</td>
		</tr>
		<tr>
			<td data-th="Task">Change prompt wording</td>
			<td data-th="Where to edit">Statement (PGML)</td>
			<td data-th="Fast check">Confirm each blank still has an answer attached.</td>
		</tr>
		<tr>
			<td data-th="Task">Add another blank</td>
			<td data-th="Where to edit">Setup then Statement</td>
			<td data-th="Fast check">Verify the new blank label maps to the right answer.</td>
		</tr>
		<tr>
			<td data-th="Task">Tighten grading</td>
			<td data-th="Where to edit">Setup (tolerances)</td>
			<td data-th="Fast check">Compare expected rounding in the Solution.</td>
		</tr>
	</tbody>
</table>

<h2>Section snapshots</h2>
<p style="background-color: #dbeafe; padding: 6px 10px;"><strong>Preamble</strong></p>
<p>
Why this exists: it declares the macros and global options that make the rest of the file possible.
</p>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 50%;">
		<col style="width: 50%;">
	</colgroup>
	<thead>
		<tr>
			<th>Common edits</th>
			<th>Common failures</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Common edits">
				<ul>
					<li>Add or remove macro files.</li>
					<li>Enable a parser or display option.</li>
				</ul>
			</td>
			<td data-th="Common failures">
				<ul>
					<li>Macro file not loaded.</li>
					<li>Macro load order hides a feature.</li>
				</ul>
			</td>
		</tr>
	</tbody>
</table>

<p style="background-color: #dcfce7; padding: 6px 10px;"><strong>Setup</strong></p>
<p>
Why this exists: it defines the values, constraints, and answer objects that the PGML uses.
</p>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 50%;">
		<col style="width: 50%;">
	</colgroup>
	<thead>
		<tr>
			<th>Common edits</th>
			<th>Common failures</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Common edits">
				<ul>
					<li>Adjust random ranges and constraints.</li>
					<li>Update answer checker tolerances.</li>
				</ul>
			</td>
			<td data-th="Common failures">
				<ul>
					<li>Impossible wet-lab variants.</li>
					<li>Unit conversions applied twice.</li>
				</ul>
			</td>
		</tr>
	</tbody>
</table>

<p style="background-color: #ffedd5; padding: 6px 10px;"><strong>Statement</strong></p>
<p>
Why this exists: it is the PGML prompt students read, including data, structure, and blanks.
</p>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 50%;">
		<col style="width: 50%;">
	</colgroup>
	<thead>
		<tr>
			<th>Common edits</th>
			<th>Common failures</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Common edits">
				<ul>
					<li>Rewrite the story or add a data table.</li>
					<li>Insert or remove answer blanks.</li>
				</ul>
			</td>
			<td data-th="Common failures">
				<ul>
					<li>Blank missing its attached answer.</li>
					<li>Variable used before it is defined.</li>
				</ul>
			</td>
		</tr>
	</tbody>
</table>

<p style="background-color: #fce7f3; padding: 6px 10px;"><strong>Solution</strong></p>
<p>
Why this exists: it shows the grading target and builds trust without becoming a second lecture.
</p>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 50%;">
		<col style="width: 50%;">
	</colgroup>
	<thead>
		<tr>
			<th>Common edits</th>
			<th>Common failures</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Common edits">
				<ul>
					<li>Clarify formula or unit usage.</li>
					<li>Explain rounding or tolerance rules.</li>
				</ul>
			</td>
			<td data-th="Common failures">
				<ul>
					<li>Solution implies a different convention.</li>
					<li>Displayed rounding contradicts grading.</li>
				</ul>
			</td>
		</tr>
	</tbody>
</table>

<p>{{template.ShowOrg()}}</p>
