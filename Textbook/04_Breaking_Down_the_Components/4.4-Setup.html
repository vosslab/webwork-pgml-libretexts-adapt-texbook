<p style="background-color: #dcfce7; padding: 6px 10px;"><strong>Setup</strong></p>
<p>
Setup is where a general prompt becomes a specific, randomized instance. This is where you
define values, choose realistic options, and create answer objects for the blanks in the
Statement. For randomization patterns and best practices, see
<a href="/@go/page/555727">Section 6.5</a>. Variables defined here are inserted into the prompt
using <a href="/@go/page/555708">command substitution</a> (Section 3.6). For a catalog of
question types and the widgets they use, see <a href="/@go/page/488662">Chapter 5</a>.
</p>
<p>
Setup is the section most life science instructors edit. Think of it as the lab notebook for the
problem: if the values, units, or tolerances are wrong here, no amount of prompt editing will fix
grading.
</p>

<h2>How to read this code</h2>
<p>
The setup section is where the abstract idea of the problem becomes concrete. This is where
values are chosen, constrained, and combined into the exact targets the grader will check. If a
problem behaves differently across seeds or produces surprising answers, this is the first place
to look.
</p>
<p>
The excerpt below defines the answer objects used later in the statement. Nothing here is visible
to students, but everything here controls grading behavior.
</p>
<pre>
$radio1 = RadioButtons(
	[ 'Red', 'Blue', 'Green', 'None of these' ],
	'Blue',
);

$radio2 = RadioButtons(
	[ 'Red', 'Blue', 'Green', 'None of these' ],
	2,
	separator => $SPACE x 5
);
</pre>
<p><strong>Line notes</strong></p>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 30%;">
		<col style="width: 40%;">
		<col style="width: 30%;">
	</colgroup>
	<thead>
		<tr>
			<th>Line or snippet</th>
			<th>What it does</th>
			<th>What you would change first</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Line or snippet"><code>RadioButtons(...)</code></td>
			<td data-th="What it does">Creates a radio-button answer object.</td>
			<td data-th="What you would change first">Change this if you switch interaction types.</td>
		</tr>
		<tr>
			<td data-th="Line or snippet"><code>[ 'Red', 'Blue', 'Green', 'None of these' ]</code></td>
			<td data-th="What it does">Defines what students can select.</td>
			<td data-th="What you would change first">Edit when changing the story or options.</td>
		</tr>
		<tr>
			<td data-th="Line or snippet"><code>'Blue'</code></td>
			<td data-th="What it does">Sets the correct answer by value.</td>
			<td data-th="What you would change first">Use this when clarity matters more than indexing.</td>
		</tr>
		<tr>
			<td data-th="Line or snippet"><code>2</code></td>
			<td data-th="What it does">Sets the correct answer by index (starting at 0).</td>
			<td data-th="What you would change first">Use when randomizing or reordering choices.</td>
		</tr>
		<tr>
			<td data-th="Line or snippet"><code>separator =&gt; $SPACE x 5</code></td>
			<td data-th="What it does">Controls layout spacing.</td>
			<td data-th="What you would change first">Adjust for readability only.</td>
		</tr>
	</tbody>
</table>
<p>
A frequent source of confusion is changing the prompt text without updating the corresponding
answer object. Keeping all answer definitions together in setup makes these mismatches easier to
spot.
</p>

<p>
Why this exists: it turns a story into answer objects and grading rules that the PGML can use.
</p>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 50%;">
		<col style="width: 50%;">
	</colgroup>
	<thead>
		<tr>
			<th>Common edits</th>
			<th>Common failures</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Common edits">
				<ul>
					<li>Edit choice lists or correct answers.</li>
					<li>Adjust layout spacing or ordering.</li>
				</ul>
			</td>
			<td data-th="Common failures">
				<ul>
					<li>Correct answer no longer matches the choice list.</li>
					<li>Statement references the wrong answer object.</li>
				</ul>
			</td>
		</tr>
	</tbody>
</table>

<p>
Try it now: change one choice, render a variant, and confirm the correct answer still matches the
intended option and the layout is readable.
</p>

<h2>Answer objects and choices</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 24%;">
		<col style="width: 40%;">
		<col style="width: 18%;">
		<col style="width: 18%;">
	</colgroup>
	<thead>
		<tr>
			<th>Answer object</th>
			<th>Choice list</th>
			<th>Correct answer</th>
			<th>Why it exists</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Answer object">radio1</td>
			<td data-th="Choice list">Red, Blue, Green, None of these</td>
			<td data-th="Correct answer">Blue (by value)</td>
			<td data-th="Why it exists">Single-choice prompt with a clear correct label.</td>
		</tr>
		<tr>
			<td data-th="Answer object">radio2</td>
			<td data-th="Choice list">Red, Blue, Green, None of these</td>
			<td data-th="Correct answer">Index 2</td>
			<td data-th="Why it exists">Same options with a horizontal layout.</td>
		</tr>
	</tbody>
</table>

<p>
Answer targets are the glue between Setup and Statement: these are the answer objects attached to
blanks in the prompt.
</p>

<h2>Answer targets</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 22%;">
		<col style="width: 28%;">
		<col style="width: 28%;">
		<col style="width: 22%;">
	</colgroup>
	<thead>
		<tr>
			<th>Answer object</th>
			<th>Correct answer</th>
			<th>How it is set</th>
			<th>Used by which blank</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Answer object">radio1</td>
			<td data-th="Correct answer">Blue</td>
			<td data-th="How it is set">Value string</td>
			<td data-th="Used by which blank">radio1 blank</td>
		</tr>
		<tr>
			<td data-th="Answer object">radio2</td>
			<td data-th="Correct answer">Index 2</td>
			<td data-th="How it is set">Index in list (0-based)</td>
			<td data-th="Used by which blank">radio2 blank</td>
		</tr>
	</tbody>
</table>

<h2>Answer object options</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 28%;">
		<col style="width: 36%;">
		<col style="width: 36%;">
	</colgroup>
	<thead>
		<tr>
			<th>Option</th>
			<th>What it controls</th>
			<th>When to use it</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Option">Correct answer by value</td>
			<td data-th="What it controls">Chooses the correct option by its label.</td>
			<td data-th="When to use it">When clarity matters more than index tracking.</td>
		</tr>
		<tr>
			<td data-th="Option">Correct answer by index</td>
			<td data-th="What it controls">Chooses the correct option by position.</td>
			<td data-th="When to use it">When you randomize or reorder choices.</td>
		</tr>
		<tr>
			<td data-th="Option">separator =&gt; $SPACE x 5</td>
			<td data-th="What it controls">Spacing between choices.</td>
			<td data-th="When to use it">When horizontal layout needs breathing room.</td>
		</tr>
	</tbody>
</table>

<h2>Broken example: correct answer does not match the story</h2>
<p>
This problem renders and accepts input, but grading behaves unexpectedly. Students select the
correct option according to the prompt, but the system marks it wrong.
</p>
<pre>
$radio = RadioButtons(
	[ 'ATP', 'ADP', 'AMP' ],
	'AMP',
);
</pre>
<p>
The statement later asks which molecule has the highest energy.
</p>
<p><strong>What went wrong</strong></p>
<ul>
	<li>The story implies ATP is correct.</li>
	<li>The setup defines AMP as the correct answer.</li>
	<li>The grader is doing exactly what it was told.</li>
</ul>
<p><strong>How to recognize it</strong></p>
<ul>
	<li>Multiple students report being marked wrong for the same choice.</li>
	<li>Previewing the problem shows consistent wrong grading.</li>
	<li>The solution displays a different answer than the prompt implies.</li>
</ul>
<p><strong>How to fix it</strong></p>
<p>
Always read the setup and the statement back to back. When changing the story, update the setup
first, then confirm the statement still matches.
</p>

<p>
Keep the choice lists and correct answers aligned with the statement text so the grading intent
stays obvious.
</p>
